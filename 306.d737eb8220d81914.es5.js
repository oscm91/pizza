"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[306],{MVcp:(e,t,n)=>{n.r(t),n.d(t,{actions:()=>L,facade:()=>q,getStore:()=>V});var r=n("0Rih"),a=n("UXE0"),c=n.n(a),u=n("wGcZ");function s(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a&&a.worker?a(n,r,e):t(a)}}}}s((function(){}));var i=n("BuS7"),o=n.n(i),p=n("S/9d"),d=n.n(p),f=n("GVW5");var m=new function(){return new Worker(n.p+"workerReducer.worker.1e235cc99cfde70c.es5.worker.js")},l=null,y=!1;function v(){return(v=o()(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l||y){e.next=5;break}return y=!0,e.next=4,(0,f.wrap)(m);case 4:l=e.sent;case 5:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e(l)}),0)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const x=function(){return v.apply(this,arguments)};var g="@@PAYMENTS/TABLE/FORMAT",w="@@PAYMENTS/TABLE/FILTER",h="@@PAYMENTS/TABLE/UPDATE",O="@@PRODUCTS/ADD/INGREDIENT",S="@@PRODUCTS/REMOVE/INGREDIENT",b="@@PRODUCTS/ADD/MASS",T="@@PRODUCTS/REMOVE/MASS",k="@@PRODUCTS/SET/NAME",j="@@PRODUCTS/UPDATE",E="@@PRODUCTS/SAVE",D={data:[],normalized:[],filtered:[]};var A={ingredients:[{name:"Pollo",price:5e3},{name:"Peperoni",price:4500},{name:"Maiz",price:3e3},{name:"Tomate",price:3e3},{name:"Aj\xed",price:3e3},{name:"Maduro",price:3e3},{name:"Champi\xf1ones",price:3e3},{name:"Carne de res",price:3e3},{name:"Aguacate",price:3e3},{name:"Cebolla",price:3e3},{name:"Jam\xf3n",price:3e3},{name:"Queso",price:3e3},{name:"Anchoas",price:3e3},{name:"Salm\xf3n",price:3e3},{name:"Esp\xe1rragos",price:3e3},{name:"habichuela",price:3e3}],mass:[{name:"Base de harina",price:1e4},{name:"Base de avena",price:15e3}],product:{name:"",ingredients:[],mass:void 0,price:0,resume:[],isCompleted:!1},list:[]},C=function(e,t){return(e&&e.price||0)+(t&&t.length?t.reduce((function(e,t){return e+(t.price||0)}),0):0)},P=function(e,t){var n=[];if(e&&n.push(Object.assign({},e,{type:"mass",quantity:1})),t&&t.length){var r=t.reduce((function(e,t){var n,r=e[t.name]||{};return Object.assign({},e,((n={})[t.name]=Object.assign({},t,{price:(r.price||0)+t.price,type:"ingredient",quantity:(r.quantity||0)+1}),n))}),{});n.push.apply(n,Object.values(r))}return n},_=function(e,t,n){return!!(e&&t&&n&&n.length)};var M=(0,r.UY)({payments:function(e,t){void 0===e&&(e=D);var n=t.type,r=t.payload;switch(n){case g:var a=Object.values(r.payments).map((function(e){return Object.assign({},e,{date:e.created_date,amount:"$"+e.payment_value,deductions:"-$"+e.payment_due})}));return Object.assign({},e,{data:r.payments,normalized:a});case w:return!r.filters.length||r.filters.includes("all")?Object.assign({},e,{filtered:r.payments}):Object.assign({},e,{filtered:r.payments.filter((function(e){return r.filters.includes(e.payment_type)}))});case h:return Object.assign({},e,r);default:return e}},products:function(e,t){void 0===e&&(e=A);var n=t.type,r=t.payload;switch(n){case k:return Object.assign({},e,{product:Object.assign({},e.product,{name:r,isCompleted:_(r,e.product.mass,e.product.ingredients)})});case b:var a=r,c=e.mass.find((function(e){return e.name===a}));return Object.assign({},e,{product:Object.assign({},e.product,{mass:c,price:C(c,e.product.ingredients),resume:P(c,e.product.ingredients),isCompleted:_(e.product.name,c,e.product.ingredients)})});case T:var u=void 0;return Object.assign({},e,{product:Object.assign({},e.product,{mass:u,price:C(u,e.product.ingredients),resume:P(u,e.product.ingredients),isCompleted:_(e.product.name,u,e.product.ingredients)})});case O:var s=r,i=e.ingredients.find((function(e){return e.name===s})),o=[].concat(e.product.ingredients,i);return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:o,price:C(e.product.mass,o),resume:P(e.product.mass,o),isCompleted:_(e.product.name,e.product.mass,o)})});case S:var p=r,d=e.ingredients.find((function(e){return e.name===p})),f=!1,m=e.product.ingredients.filter((function(e){return!(e.name===d.name&&!f)||(f=!0,!1)}));return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:m,price:C(e.product.mass,m),resume:P(e.product.mass,m),isCompleted:_(e.product.name,e.product.mass,m)})});case E:var l;return Object.assign({},e,{list:Object.assign({},e.list,(l={},l[e.product.name]=e.product,l)),product:A.product});case j:return Object.assign({},r);default:return e}}});const R=function(e,t){return M(e,t)};var U=n("SZFK"),N=n("I/w2"),I=function(e,t){var n=function(){var n=o()(d().mark((function n(r,a,c){var u,s,i;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h,payload:{data:[],normalized:[],filtered:[]}}),n.next=3,c();case 3:return u=n.sent,n.next=6,u(a(),{type:g,payload:{payments:e}});case 6:return s=n.sent,n.next=9,u(s,{type:w,payload:{payments:s.payments.normalized,filters:t}});case 9:i=n.sent,r({type:h,payload:i.payments});case 11:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return n.worker=!0,n},z=function(e,t){var n=function(){var n=o()(d().mark((function n(r,a,c){var u,s;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h,payload:Object.assign({},e,{filtered:[]})}),n.next=3,c();case 3:return u=n.sent,n.next=6,u(a(),{type:w,payload:{payments:e,filters:t}});case 6:s=n.sent,r({type:h,payload:s.payments});case 8:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return n.worker=!0,n};function F(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}var B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.qC;function V(e){return(0,r.MT)(R,e,B((0,r.md)((0,u.save)(),s(x),c())))}var L={paymentsTableFormat:I,paymentsTableFilter:z},q={paymentsFacade:function(){var e=(0,N.useSelector)((function(e){return Object.assign({},e.payments,{list:e.products.list})})),t=(0,N.useDispatch)(),n=(0,U.useState)("today"),r=n[0],a=n[1],c=(0,U.useState)([]),u=c[0],s=c[1],i=(0,U.useState)([]),p=i[0],f=i[1],m=(0,U.useState)(""),l=m[0],y=m[1],v=(0,U.useState)(""),x=v[0],g=v[1];return{getSearch:function(){return r},setSearch:function(e){return a(e)},checkFilter:function(e){return u.includes(e)},setFilters:function(e,t){s(t?Array.from(new Set([].concat(e,u))):Array.from(new Set([].concat(e,u))).filter((function(t){return t!==e})))},getData:function(e){t(function(e,t){var n=function(){var n=o()(d().mark((function n(r,a){var c,u,s,i;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a(),u=c.payments.data,r({type:h,payload:{data:[],normalized:[],filtered:[]}}),n.next=5,new Promise((function(t){setTimeout((function(){"today"===e&&t(u),"week"===e&&t(u),"september"===e&&t(u)}),100)}));case 5:s=n.sent,r({type:h,payload:{data:s,normalized:[],filtered:[]}}),i=a().payments.data,r(I(i,t));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return n}(e,u))},filter:function(){t(z(e.normalized,u))},getState:function(){return e},getTotal:function(){return p},setTotal:function(){return f},buyer:l,product:x,setBuyer:y,setProduct:g,total:(e.data||[]).reduce((function(e,t){return e+(t.payment_value||0)}),0),sellProduct:function(){l&&x&&(t(function(e,t){var n=function(){var n=o()(d().mark((function n(r,a){var c,u;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=a(),u=[].concat(c.payments.data,e),r({type:h,payload:{data:u,normalized:[],filtered:[]}}),r(I(u,t));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return n}({id:"fake-id-"+F(),created_date:(new Date).toISOString(),transaction_name:l,transaction_id:F(),payment_status:"started",payment_type:x,payment_method:"**** **** **** 7711",payment_value:e.list[x].price,payment_due:0},u)),y(""),g(""))}}},productsFacade:function(){var e=(0,N.useSelector)((function(e){return e.products})),t=(0,N.useDispatch)();return{removeIngredient:function(e){var n,r;t((n=e,r=function(){var e=o()(d().mark((function e(t,r,a){var c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:S,payload:n});case 5:u=e.sent,t({type:j,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},addIngredient:function(e){var n,r;t((n=e,r=function(){var e=o()(d().mark((function e(t,r,a){var c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:O,payload:n});case 5:u=e.sent,t({type:j,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},removeMass:function(e){var n,r;t((n=e,r=function(){var e=o()(d().mark((function e(t,r,a){var c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:T,payload:n});case 5:u=e.sent,t({type:j,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},addMass:function(e){var n,r;t((n=e,r=function(){var e=o()(d().mark((function e(t,r,a){var c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:b,payload:n});case 5:u=e.sent,t({type:j,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},setName:function(e){t(function(e){var t=function(){var t=o()(d().mark((function t(n,r){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:k,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return t}(e))},saveProduct:function(){var e;t((e=function(){var e=o()(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:E,payload:void 0});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e))},getState:function(){return e}}}}}}]);