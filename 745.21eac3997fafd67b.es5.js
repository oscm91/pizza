"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[745],{MVcp:(e,t,n)=>{n.r(t),n.d(t,{actions:()=>V,facade:()=>q,getStore:()=>B});var r=n("0Rih"),a=n("V8Kl"),c=n("UA8S");function u(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a&&a.worker?a(n,r,e):t(a)}}}}u((function(){}));var s=n("BuS7"),i=n.n(s),o=n("S/9d"),p=n.n(o),d=n("cYqW");var f=new function(){return new Worker(n.p+"workerReducer.worker.abc2fb114f5b18f5.es5.worker.js")},m=null,l=!1;function y(){return(y=i()(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m||l){e.next=5;break}return l=!0,e.next=4,(0,d.Ud)(f);case 4:m=e.sent;case 5:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e(m)}),0)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const v=function(){return y.apply(this,arguments)};var x="@@PAYMENTS/TABLE/FORMAT",g="@@PAYMENTS/TABLE/FILTER",h="@@PAYMENTS/TABLE/UPDATE",w="@@PRODUCTS/ADD/INGREDIENT",O="@@PRODUCTS/REMOVE/INGREDIENT",S="@@PRODUCTS/ADD/MASS",b="@@PRODUCTS/REMOVE/MASS",k="@@PRODUCTS/SET/NAME",T="@@PRODUCTS/UPDATE",j="@@PRODUCTS/SAVE",E={data:[],normalized:[],filtered:[]};var P={ingredients:[{name:"Pollo",price:5e3},{name:"Peperoni",price:4500},{name:"Maiz",price:3e3},{name:"Tomate",price:3e3},{name:"Aj\xed",price:3e3},{name:"Maduro",price:3e3},{name:"Champi\xf1ones",price:3e3},{name:"Carne de res",price:3e3},{name:"Aguacate",price:3e3},{name:"Cebolla",price:3e3},{name:"Jam\xf3n",price:3e3},{name:"Queso",price:3e3},{name:"Anchoas",price:3e3},{name:"Salm\xf3n",price:3e3},{name:"Esp\xe1rragos",price:3e3},{name:"habichuela",price:3e3}],mass:[{name:"Base de harina",price:1e4},{name:"Base de avena",price:15e3}],product:{name:"",ingredients:[],mass:void 0,price:0,resume:[],isCompleted:!1},list:[]},A=function(e,t){return(e&&e.price||0)+(t&&t.length?t.reduce((function(e,t){return e+(t.price||0)}),0):0)},C=function(e,t){var n=[];if(e&&n.push(Object.assign({},e,{type:"mass",quantity:1})),t&&t.length){var r=t.reduce((function(e,t){var n,r=e[t.name]||{};return Object.assign({},e,((n={})[t.name]=Object.assign({},t,{price:(r.price||0)+t.price,type:"ingredient",quantity:(r.quantity||0)+1}),n))}),{});n.push.apply(n,Object.values(r))}return n},D=function(e,t,n){return!!(e&&t&&n&&n.length)};var _=(0,r.UY)({payments:function(e,t){void 0===e&&(e=E);var n=t.type,r=t.payload;switch(n){case x:var a=Object.values(r.payments).map((function(e){return Object.assign({},e,{date:e.created_date,amount:"$"+e.payment_value,deductions:"-$"+e.payment_due})}));return Object.assign({},e,{data:r.payments,normalized:a});case g:return!r.filters.length||r.filters.includes("all")?Object.assign({},e,{filtered:r.payments}):Object.assign({},e,{filtered:r.payments.filter((function(e){return r.filters.includes(e.payment_type)}))});case h:return Object.assign({},e,r);default:return e}},products:function(e,t){void 0===e&&(e=P);var n=t.type,r=t.payload;switch(n){case k:return Object.assign({},e,{product:Object.assign({},e.product,{name:r,isCompleted:D(r,e.product.mass,e.product.ingredients)})});case S:var a=r,c=e.mass.find((function(e){return e.name===a}));return Object.assign({},e,{product:Object.assign({},e.product,{mass:c,price:A(c,e.product.ingredients),resume:C(c,e.product.ingredients),isCompleted:D(e.product.name,c,e.product.ingredients)})});case b:var u=void 0;return Object.assign({},e,{product:Object.assign({},e.product,{mass:u,price:A(u,e.product.ingredients),resume:C(u,e.product.ingredients),isCompleted:D(e.product.name,u,e.product.ingredients)})});case w:var s=r,i=e.ingredients.find((function(e){return e.name===s})),o=[].concat(e.product.ingredients,i);return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:o,price:A(e.product.mass,o),resume:C(e.product.mass,o),isCompleted:D(e.product.name,e.product.mass,o)})});case O:var p=r,d=e.ingredients.find((function(e){return e.name===p})),f=!1,m=e.product.ingredients.filter((function(e){return!(e.name===d.name&&!f)||(f=!0,!1)}));return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:m,price:A(e.product.mass,m),resume:C(e.product.mass,m),isCompleted:D(e.product.name,e.product.mass,m)})});case j:var l;return Object.assign({},e,{list:Object.assign({},e.list,(l={},l[e.product.name]=e.product,l)),product:P.product});case T:return Object.assign({},r);default:return e}}});const M=function(e,t){return _(e,t)};var R=n("ERkP"),U=n("tPIx"),I=function(e,t){var n=function(){var n=i()(p().mark((function n(r,a,c){var u,s,i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h,payload:{data:[],normalized:[],filtered:[]}}),n.next=3,c();case 3:return u=n.sent,n.next=6,u(a(),{type:x,payload:{payments:e}});case 6:return s=n.sent,n.next=9,u(s,{type:g,payload:{payments:s.payments.normalized,filters:t}});case 9:i=n.sent,r({type:h,payload:i.payments});case 11:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return n.worker=!0,n},N=function(e,t){var n=function(){var n=i()(p().mark((function n(r,a,c){var u,s;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h,payload:Object.assign({},e,{filtered:[]})}),n.next=3,c();case 3:return u=n.sent,n.next=6,u(a(),{type:g,payload:{payments:e,filters:t}});case 6:s=n.sent,r({type:h,payload:s.payments});case 8:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return n.worker=!0,n};function z(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}var F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.qC;function B(e){return(0,r.MT)(M,e,F((0,r.md)((0,c.a1)(),u(v),a.Z)))}var V={paymentsTableFormat:I,paymentsTableFilter:N},q={paymentsFacade:function(){var e=(0,U.v9)((function(e){return Object.assign({},e.payments,{list:e.products.list})})),t=(0,U.I0)(),n=(0,R.useState)("today"),r=n[0],a=n[1],c=(0,R.useState)([]),u=c[0],s=c[1],o=(0,R.useState)([]),d=o[0],f=o[1],m=(0,R.useState)(""),l=m[0],y=m[1],v=(0,R.useState)(""),x=v[0],g=v[1];return{getSearch:function(){return r},setSearch:function(e){return a(e)},checkFilter:function(e){return u.includes(e)},setFilters:function(e,t){s(t?Array.from(new Set([].concat(e,u))):Array.from(new Set([].concat(e,u))).filter((function(t){return t!==e})))},getData:function(e){t(function(e,t){var n=function(){var n=i()(p().mark((function n(r,a){var c,u,s,i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a(),u=c.payments.data,r({type:h,payload:{data:[],normalized:[],filtered:[]}}),n.next=5,new Promise((function(t){setTimeout((function(){"today"===e&&t(u),"week"===e&&t(u),"september"===e&&t(u)}),100)}));case 5:s=n.sent,r({type:h,payload:{data:s,normalized:[],filtered:[]}}),i=a().payments.data,r(I(i,t));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return n}(e,u))},filter:function(){t(N(e.normalized,u))},getState:function(){return e},getTotal:function(){return d},setTotal:function(){return f},buyer:l,product:x,setBuyer:y,setProduct:g,total:(e.data||[]).reduce((function(e,t){return e+(t.payment_value||0)}),0),sellProduct:function(){l&&x&&(t(function(e,t){var n=function(){var n=i()(p().mark((function n(r,a){var c,u;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=a(),u=[].concat(c.payments.data,e),r({type:h,payload:{data:u,normalized:[],filtered:[]}}),r(I(u,t));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return n}({id:"fake-id-"+z(),created_date:(new Date).toISOString(),transaction_name:l,transaction_id:z(),payment_status:"started",payment_type:x,payment_method:"**** **** **** 7711",payment_value:e.list[x].price,payment_due:0},u)),y(""),g(""))}}},productsFacade:function(){var e=(0,U.v9)((function(e){return e.products})),t=(0,U.I0)();return{removeIngredient:function(e){var n,r;t((n=e,r=function(){var e=i()(p().mark((function e(t,r,a){var c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:O,payload:n});case 5:u=e.sent,t({type:T,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},addIngredient:function(e){var n,r;t((n=e,r=function(){var e=i()(p().mark((function e(t,r,a){var c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:w,payload:n});case 5:u=e.sent,t({type:T,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},removeMass:function(e){var n,r;t((n=e,r=function(){var e=i()(p().mark((function e(t,r,a){var c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:b,payload:n});case 5:u=e.sent,t({type:T,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},addMass:function(e){var n,r;t((n=e,r=function(){var e=i()(p().mark((function e(t,r,a){var c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return c=e.sent,e.next=5,c(r(),{type:S,payload:n});case 5:u=e.sent,t({type:T,payload:u.products});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.worker=!0,r))},setName:function(e){t(function(e){var t=function(){var t=i()(p().mark((function t(n,r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:k,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return t}(e))},saveProduct:function(){var e;t((e=function(){var e=i()(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:j,payload:void 0});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e))},getState:function(){return e}}}}}}]);