"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[918],{lyYU:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}r.r(t),r.d(t,{actions:()=>Y,facade:()=>$,getStore:()=>K});var c="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function p(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function d(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(i(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(i(1));return r(d)(e,t)}if("function"!=typeof e)throw new Error(i(2));var a=e,o=t,s=[],l=s,y=!1;function f(){l===s&&(l=s.slice())}function m(){if(y)throw new Error(i(3));return o}function g(e){if("function"!=typeof e)throw new Error(i(4));if(y)throw new Error(i(5));var t=!0;return f(),l.push(e),function(){if(t){if(y)throw new Error(i(6));t=!1,f();var r=l.indexOf(e);l.splice(r,1),s=null}}}function w(e){if(!p(e))throw new Error(i(7));if(void 0===e.type)throw new Error(i(8));if(y)throw new Error(i(9));try{y=!0,o=a(o,e)}finally{y=!1}for(var t=s=l,r=0;r<t.length;r++){(0,t[r])()}return e}function O(e){if("function"!=typeof e)throw new Error(i(10));a=e,w({type:u.REPLACE})}function b(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(i(11));function r(){e.next&&e.next(m())}return r(),{unsubscribe:t(r)}}})[c]=function(){return this},e}return w({type:u.INIT}),(n={dispatch:w,subscribe:g,getState:m,replaceReducer:O})[c]=b,n}function l(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var y=r("UXE0"),f=r.n(y),m=r("wGcZ");function g(e){return({dispatch:t,getState:r})=>n=>a=>"function"==typeof a&&a.worker?a(t,r,e):n(a)}g((()=>{}));var w=r("GVW5");const O=new function(){return new Worker(r.p+"workerReducer.worker.527d45e699b4e887.esm.worker.js")};let b=null,h=!1;const v=async function(){return b||h||(h=!0,b=await(0,w.wrap)(O)),new Promise((e=>{setTimeout((()=>{e(b)}),0)}))},E="@@PAYMENTS/TABLE/FORMAT",j="@@PAYMENTS/TABLE/FILTER",S="@@PAYMENTS/TABLE/UPDATE",x="@@PRODUCTS/ADD/INGREDIENT",P="@@PRODUCTS/REMOVE/INGREDIENT",T="@@PRODUCTS/ADD/MASS",A="@@PRODUCTS/REMOVE/MASS",N="@@PRODUCTS/SET/NAME",D="@@PRODUCTS/UPDATE",_="@@PRODUCTS/SAVE",C={data:[],normalized:[],filtered:[]},k={ingredients:[{name:"Pollo",price:5e3},{name:"Peperoni",price:4500},{name:"Maiz",price:3e3},{name:"Tomate",price:3e3},{name:"Aj\xed",price:3e3},{name:"Maduro",price:3e3},{name:"Champi\xf1ones",price:3e3},{name:"Carne de res",price:3e3},{name:"Aguacate",price:3e3},{name:"Cebolla",price:3e3},{name:"Jam\xf3n",price:3e3},{name:"Queso",price:3e3},{name:"Anchoas",price:3e3},{name:"Salm\xf3n",price:3e3},{name:"Esp\xe1rragos",price:3e3},{name:"habichuela",price:3e3}],mass:[{name:"Base de harina",price:1e4},{name:"Base de avena",price:15e3}],product:{name:"",ingredients:[],mass:void 0,price:0,resume:[],isCompleted:!1},list:[]},R=(e,t)=>(e&&e.price||0)+(t&&t.length?t.reduce(((e,t)=>e+(t.price||0)),0):0),I=(e,t)=>{const r=[];if(e&&r.push(Object.assign({},e,{type:"mass",quantity:1})),t&&t.length){const e=t.reduce(((e,t)=>{const r=e[t.name]||{};return Object.assign({},e,{[t.name]:Object.assign({},t,{price:(r.price||0)+t.price,type:"ingredient",quantity:(r.quantity||0)+1})})}),{});r.push(...Object.values(e))}return r},M=(e,t,r)=>!!(e&&t&&r&&r.length),U=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];0,"function"==typeof e[a]&&(r[a]=e[a])}var o,c=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(i(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(r)}catch(s){o=s}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var n=!1,a={},s=0;s<c.length;s++){var u=c[s],p=r[u],d=e[u],l=p(d,t);if(void 0===l){t&&t.type;throw new Error(i(14))}a[u]=l,n=n||l!==d}return(n=n||c.length!==Object.keys(e).length)?a:e}}({payments:(e=C,{type:t,payload:r})=>{switch(t){case E:{const t=Object.values(r.payments).map((e=>Object.assign({},e,{date:e.created_date,amount:`$${e.payment_value}`,deductions:`-$${e.payment_due}`})));return Object.assign({},e,{data:r.payments,normalized:t})}case j:return!r.filters.length||r.filters.includes("all")?Object.assign({},e,{filtered:r.payments}):Object.assign({},e,{filtered:r.payments.filter((e=>r.filters.includes(e.payment_type)))});case S:return Object.assign({},e,r);default:return e}},products:(e=k,{type:t,payload:r})=>{switch(t){case N:return Object.assign({},e,{product:Object.assign({},e.product,{name:r,isCompleted:M(r,e.product.mass,e.product.ingredients)})});case T:{const t=r,n=e.mass.find((e=>e.name===t));return Object.assign({},e,{product:Object.assign({},e.product,{mass:n,price:R(n,e.product.ingredients),resume:I(n,e.product.ingredients),isCompleted:M(e.product.name,n,e.product.ingredients)})})}case A:{const t=void 0;return Object.assign({},e,{product:Object.assign({},e.product,{mass:t,price:R(t,e.product.ingredients),resume:I(t,e.product.ingredients),isCompleted:M(e.product.name,t,e.product.ingredients)})})}case x:{const t=r,n=e.ingredients.find((e=>e.name===t)),a=[].concat(e.product.ingredients,n);return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:a,price:R(e.product.mass,a),resume:I(e.product.mass,a),isCompleted:M(e.product.name,e.product.mass,a)})})}case P:{const t=r,n=e.ingredients.find((e=>e.name===t));let a=!1;const o=e.product.ingredients.filter((e=>!(e.name===n.name&&!a)||(a=!0,!1)));return Object.assign({},e,{product:Object.assign({},e.product,{ingredients:o,price:R(e.product.mass,o),resume:I(e.product.mass,o),isCompleted:M(e.product.name,e.product.mass,o)})})}case _:return Object.assign({},e,{list:Object.assign({},e.list,{[e.product.name]:e.product}),product:k.product});case D:return Object.assign({},r);default:return e}}}),z=(e,t)=>U(e,t);var B=r("SZFK"),F=r("I/w2");const L=(e,t)=>{const r=async(r,n,a)=>{r({type:S,payload:{data:[],normalized:[],filtered:[]}});const o=await a(),i=await o(n(),{type:E,payload:{payments:e}}),c=await o(i,{type:j,payload:{payments:i.payments.normalized,filters:t}});r({type:S,payload:c.payments})};return r.worker=!0,r},V=(e,t)=>{const r=async(r,n,a)=>{r({type:S,payload:Object.assign({},e,{filtered:[]})});const o=await a(),i=await o(n(),{type:j,payload:{payments:e,filters:t}});r({type:S,payload:i.payments})};return r.worker=!0,r};function W(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}const G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l;function K(e){return d(z,e,G(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(i(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},c=t.map((function(e){return e(a)}));return n=l.apply(void 0,c)(r.dispatch),o(o({},r),{},{dispatch:n})}}}((0,m.save)(),g(v),f())))}const Y={paymentsTableFormat:L,paymentsTableFilter:V},$={paymentsFacade:()=>{const e=(0,F.useSelector)((e=>Object.assign({},e.payments,{list:e.products.list}))),t=(0,F.useDispatch)(),[r,n]=(0,B.useState)("today"),[a,o]=(0,B.useState)([]),[i,c]=(0,B.useState)([]),[s,u]=(0,B.useState)(""),[p,d]=(0,B.useState)("");return{getSearch:()=>r,setSearch:e=>n(e),checkFilter:e=>a.includes(e),setFilters:(e,t)=>{o(t?Array.from(new Set([].concat(e,a))):Array.from(new Set([].concat(e,a))).filter((t=>t!==e)))},getData:e=>{t(((e,t)=>async(r,n)=>{const a=n().payments.data;r({type:S,payload:{data:[],normalized:[],filtered:[]}});const o=await new Promise((t=>{setTimeout((()=>{"today"===e&&t(a),"week"===e&&t(a),"september"===e&&t(a)}),100)}));r({type:S,payload:{data:o,normalized:[],filtered:[]}});const i=n().payments.data;r(L(i,t))})(e,a))},filter:()=>{t(V(e.normalized,a))},getState:()=>e,getTotal:()=>i,setTotal:()=>c,buyer:s,product:p,setBuyer:u,setProduct:d,total:(e.data||[]).reduce(((e,t)=>e+(t.payment_value||0)),0),sellProduct:()=>{s&&p&&(t(((e,t)=>async(r,n)=>{const a=n(),o=[].concat(a.payments.data,e);r({type:S,payload:{data:o,normalized:[],filtered:[]}}),r(L(o,t))})({id:"fake-id-"+W(),created_date:(new Date).toISOString(),transaction_name:s,transaction_id:W(),payment_status:"started",payment_type:p,payment_method:"**** **** **** 7711",payment_value:e.list[p].price,payment_due:0},a)),u(""),d(""))}}},productsFacade:()=>{const e=(0,F.useSelector)((e=>e.products)),t=(0,F.useDispatch)();return{removeIngredient:e=>{t((e=>{const t=async(t,r,n)=>{const a=await n(),o=await a(r(),{type:P,payload:e});t({type:D,payload:o.products})};return t.worker=!0,t})(e))},addIngredient:e=>{t((e=>{const t=async(t,r,n)=>{const a=await n(),o=await a(r(),{type:x,payload:e});t({type:D,payload:o.products})};return t.worker=!0,t})(e))},removeMass:e=>{t((e=>{const t=async(t,r,n)=>{const a=await n(),o=await a(r(),{type:A,payload:e});t({type:D,payload:o.products})};return t.worker=!0,t})(e))},addMass:e=>{t((e=>{const t=async(t,r,n)=>{const a=await n(),o=await a(r(),{type:T,payload:e});t({type:D,payload:o.products})};return t.worker=!0,t})(e))},setName:e=>{t((e=>async(t,r)=>{t({type:N,payload:e})})(e))},saveProduct:()=>{t((async(e,t)=>{e({type:_,payload:void 0})}))},getState:()=>e}}}}}]);